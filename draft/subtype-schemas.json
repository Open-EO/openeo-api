{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://api.openeo.org/subtype-schemas.json",
  "title": "Subtype Schemas",
  "description": "This file defines the schemas for subtypes we define for openEO processes.",
  "definitions": {
    "band-name": {
      "type": "string",
      "subtype": "band-name",
      "title": "Band Name",
      "description": "Either a unique band name (metadata field `name`) or a [common band name](https://github.com/radiantearth/stac-spec/tree/0.9.0/extensions/eo#common-band-names) (metadata field `common_name`) available in the data cube. If unique band name and common name conflict, the unique band name has higher priority."
    },
    "bounding-box": {
      "type": "object",
      "subtype": "bounding-box",
      "title": "Bounding Box",
      "description": "A bounding box with the required fields `west`, `south`, `east`, `north` and optionally `base`, `height`, `crs`. The `crs` is a EPSG code, a WKT2:2018 string or a PROJ definition (deprecated).",
      "required": [
        "west",
        "south",
        "east",
        "north"
      ],
      "properties": {
        "west": {
          "description": "West (lower left corner, coordinate axis 1).",
          "type": "number"
        },
        "south": {
          "description": "South (lower left corner, coordinate axis 2).",
          "type": "number"
        },
        "east": {
          "description": "East (upper right corner, coordinate axis 1).",
          "type": "number"
        },
        "north": {
          "description": "North (upper right corner, coordinate axis 2).",
          "type": "number"
        },
        "base": {
          "description": "Base (optional, lower left corner, coordinate axis 3).",
          "type": [
            "number",
            "null"
          ],
          "default": null
        },
        "height": {
          "description": "Height (optional, upper right corner, coordinate axis 3).",
          "type": [
            "number",
            "null"
          ],
          "default": null
        },
        "crs": {
          "description": "Coordinate reference system of the extent, specified as as [EPSG code](http://www.epsg-registry.org/), [WKT2 (ISO 19162) string](http://docs.opengeospatial.org/is/18-010r7/18-010r7.html) or [PROJ definition (deprecated)](https://proj.org/usage/quickstart.html). Defaults to `4326` (EPSG code 4326) unless the client explicitly requests a different coordinate reference system.",
          "anyOf": [
            {
              "$ref": "#/definitions/epsg-code"
            },
            {
              "$ref": "#/definitions/wkt2-definition"
            },
            {
              "$ref": "#/definitions/proj-definition"
            }
          ],
          "default": 4326
        }
      }
    },
    "collection-id": {
      "type": "string",
      "subtype": "collection-id",
      "title": "Collection ID",
      "description": "A collection id from the list of supported collections.",
      "pattern": "^[\\w\\-\\.~/]+$"
    },
    "date": {
      "type": "string",
      "subtype": "date",
      "format": "date",
      "title": "Date only",
      "description": "Date only representation, as defined for `full-date` by [RFC 3339 in section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). The time zone is UTC."
    },
    "date-time": {
      "type": "string",
      "subtype": "date-time",
      "format": "date-time",
      "title": "Date with Time",
      "description": "Date and time representation, as defined for `date-time` by [RFC 3339 in section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6)."
    },
    "epsg-code": {
      "type": "integer",
      "subtype": "epsg-code",
      "title": "EPSG Code",
      "description": "Specifies details about cartographic projections as [EPSG](http://www.epsg.org) code.",
      "minimum": 1000,
      "examples": [
        3857
      ]
    },
    "file-path": {
      "type": "string",
      "subtype": "file-path",
      "title": "Single File path",
      "description": "A relative path to a user-uploaded file. Folders can't be specified."
    },
    "file-paths": {
      "type": "array",
      "subtype": "file-paths",
      "title": "Multiple File paths",
      "description": "An array with relative paths to user-uploaded files. Clients should assist to generate a list of files for folders.",
      "items": {
        "$ref": "#/definitions/file-path"
      }
    },
    "geojson": {
      "type": "object",
      "subtype": "geojson",
      "title": "GeoJSON",
      "description": "GeoJSON as defined by [RFC 7946](https://tools.ietf.org/html/rfc7946).",
      "allOf": [
        {
          "$ref": "https://geojson.org/schema/GeoJSON.json"
        }
      ]
    },
    "input-format": {
      "type": "string",
      "subtype": "input-format",
      "title": "Input File Format",
      "description": "An input format supported by the back-end."
    },
    "input-format-options": {
      "type": "object",
      "subtype": "input-format-options",
      "title": "Options for Input File Formats",
      "description": "Key-value-pairs with arguments for the input format options supported by the back-end."
    },
    "job-id": {
      "type": "string",
      "subtype": "job-id",
      "title": "Batch Job ID",
      "description": "A batch job id, either one of the jobs a user has stored or a publicly available job.",
      "pattern": "^[\\w\\-\\.~]+$"
    },
    "kernel": {
      "type": "array",
      "subtype": "kernel",
      "title": "Image Kernel",
      "description": "Image kernel, a two-dimensional array of numbers.",
      "items": {
        "type": "array",
        "items": {
          "type": "number"
        }
      }
    },
    "labeled-array": {
      "type": "array",
      "subtype": "labeled-array",
      "title": "Array with labels",
      "description": "An associative, ordered list of key-value pairs. Basically an array, which additionally has labels for each value. Labels can be numbers or (temporal) strings.\n\n**Important:** Due to the lack of such a data type in JSON, the schema for the items is not formally specified yet and a placeholder.",
      "items": {
        "description": "Any data type."
      }
    },
    "output-format": {
      "type": "string",
      "subtype": "output-format",
      "title": "Output File Format",
      "description": "An output format supported by the back-end."
    },
    "output-format-options": {
      "type": "object",
      "subtype": "output-format-options",
      "title": "Options for Output File Formats",
      "description": "Key-value-pairs with arguments for the output format options supported by the back-end."
    },
    "process-graph": {
      "type": "object",
      "subtype": "process-graph",
      "title": "Process Graph (user-defined process)",
      "description": "An process graph that is passed as an argument and is expected to be executed by the process. Parameters passed to the process graph are specified in the `parameters` property of the corresponding schema."
    },
    "proj-definition": {
      "type": "string",
      "subtype": "proj-definition",
      "title": "PROJ definition",
      "description": "**DEPRECATED.** Specifies details about cartographic projections as [PROJ](https://proj.org/usage/quickstart.html) definition."
    },
    "raster-cube": {
      "type": "object",
      "subtype": "raster-cube",
      "title": "Raster data cube",
      "description": "A raster data cube, an image collection stored at the back-end. Different back-ends have different internal representations for this data structure."
    },
    "temporal-interval": {
      "type": "array",
      "subtype": "temporal-interval",
      "title": "Single temporal interval",
      "description": "Left-closed temporal interval, represented as two-element array with the following elements:\n\n1. The first element is the start of the temporal interval. The specified instance in time is **included** in the interval.\n2. The second element is the end of the temporal interval. The specified instance in time is **excluded** from the interval.\n\nThe specified temporal strings follow [RFC 3339](https://tools.ietf.org/html/rfc3339). Although [RFC 3339 prohibits the hour to be '24'](https://tools.ietf.org/html/rfc3339#section-5.7), **this process allows the value '24' for the hour** of an end time in order to make it possible that left-closed time intervals can fully cover the day. `null` can be used to specify open intervals.",
      "minItems": 2,
      "maxItems": 2,
      "items": {
        "anyOf": [
          {
            "$ref": "#/definitions/date-time"
          },
          {
            "$ref": "#/definitions/date"
          },
          {
            "$ref": "#/definitions/time"
          },
          {
            "type": "null"
          }
        ]
      },
      "examples": [
        [
          "2015-01-01T00:00:00Z",
          "2016-01-01T00:00:00Z"
        ],
        [
          "2015-01-01",
          "2016-01-01"
        ],
        [
          "00:00:00Z",
          "12:00:00Z"
        ],
        [
          "2015-01-01",
          null
        ]
      ]
    },
    "temporal-intervals": {
      "type": "array",
      "subtype": "temporal-intervals",
      "title": "Multiple temporal intervals",
      "description": "Left-closed temporal intervals, which are allowed to overlap. Formatted as array of two-element arrays, each being an array with subtype `temporal-interval`.",
      "items": {
        "$ref": "#/definitions/temporal-interval"
      },
      "minItems": 1,
      "examples": [
        [
          [
            "2015-01-01",
            "2016-01-01"
          ],
          [
            "2016-01-01",
            "2017-01-01"
          ],
          [
            "2017-01-01",
            "2018-01-01"
          ]
        ],
        [
          [
            "00:00:00Z",
            "12:00:00Z"
          ],
          [
            "12:00:00Z",
            "24:00:00Z"
          ]
        ],
        [
          [
            "2020-01-01T00:00:00Z",
            null
          ]
        ]
      ]
    },
    "time": {
      "type": "string",
      "subtype": "time",
      "format": "time",
      "title": "Time only",
      "description": "Time only representation, as defined for `full-time` by [RFC 3339 in section 5.6](https://tools.ietf.org/html/rfc3339#section-5.6). Although [RFC 3339 prohibits the hour to be '24'](https://tools.ietf.org/html/rfc3339#section-5.7), this definition allows the value '24' for the hour as end time in an interval in order to make it possible that left-closed time intervals can fully cover the day."
    },
    "udf-code": {
      "type": "string",
      "subtype": "udf-code",
      "title": "UDF source code",
      "description": "The (multi-line) source code of an user-defined function (UDF)."
    },
    "udf-runtime": {
      "type": "string",
      "subtype": "udf-runtime",
      "title": "UDF runtime",
      "description": "The name of an UDF runtime."
    },
    "udf-runtime-version": {
      "type": "string",
      "subtype": "udf-runtime-version",
      "title": "UDF Runtime version",
      "description": "The version of an UDF runtime."
    },
    "uri": {
      "type": "string",
      "subtype": "uri",
      "format": "uri",
      "title": "URI",
      "description": "A valid URI according to [RFC3986](https://tools.ietf.org/html/rfc3986)."
    },
    "vector-cube": {
      "type": "object",
      "subtype": "vector-cube",
      "title": "Vector data cube",
      "description": "A vector data cube, a vector collection stored at the back-end. Different back-ends have different internal representations for this data structure"
    },
    "wkt2-definition": {
      "type": "string",
      "subtype": "wkt2-definition",
      "title": "WKT2 definition",
      "description": "Specifies details about cartographic projections as WKT2 string. Refers to the latest WKT2 version (currently [WKT2:2018](http://docs.opengeospatial.org/is/18-010r7/18-010r7.html) / ISO 19162:2018) unless otherwise stated by the process."
    }
  }
}